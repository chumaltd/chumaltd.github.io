<!DOCTYPE html>
<html data-color-mode="dark" data-dark-theme="dark">
    <head><meta charset="utf-8">
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>VoIP integration under the scorching sun | civilis</title>

<meta name="theme-color" content="rgb(38, 29, 32)">
<link rel='stylesheet' href='//fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=block'>

<link rel='stylesheet' href='/lib/cm.css'>
<link rel="stylesheet" href='/lib/base.css' />

<meta name="twitter:card" content="summary" />
<meta property="og:url" content="https://chumaltd.github.io/en/voip-integration/" />
<meta property="og:title" content="VoIP integration under the scorching sun" />
<meta property="og:description" content="The telephone, invented by Bell in 1876, has been in use for 150 years. How much longer will the method of dialing a number to reach someone continue?
In Japan, due to the widespread adoption of mobile phones, traditional PSTN phones have been declining in households. However, businesses are still required to install phones, effectively making it mandatory due to administrative demands from governments." />
<meta property="og:image" content='/images/m84jrlxVUc1r9blbt.jpg' />
<link rel="canonical" href=https://chumaltd.github.io/en/voip-integration/ />

<link rel="alternate" hreflang="ja" href="https://chumaltd.github.io/ja/voip-integration/" />
    </head>
    <body class="en "><header id="global-nav" class="navbar" role="navigation" aria-label="main navigation">
  <section class="container-xl" style="width: 100%">
  <div class="navbar-brand">
    <span class="navbar-item">
    <cm-drawer style="margin-right: .7rem"></cm-drawer>
    <a href='/' style="display: inline-flex">
	    
	    <img id="footer_logo" src="/common/civilis.svg">
	    
    </a>
    </span>
 </div>
  <div class="navbar-menu">
    <div class="navbar-start">
    </div>
  </div>
  </section>
</header>

<div id ="o" class="o">
<nav class="container-xl" style="overflow: hidden">
  <div class="d-sm-flex">
    <div class="quarter hide-sm"></div>
    <div class="p-3 three-quarter">
        <nav id="breadcrumb" class="breadcrumb is-small px-4 py-3">
<ul>
  <li class="breadcrumb-item"><a href="/en/">HOME</a></li>
  <li class="current breadcrumb-item breadcrumb-item-selected">&nbsp;VoIP integration under the scorching sun</li></ul>
<script type="application/ld+json">
{"@context":"http://schema.org", "@graph":[
	{"@type":"WebSite","id":"https:\/\/chumaltd.github.io\/en\/","name":"civilis"},
	{"@type":"BreadcrumbList","itemListElement":[
{"@type": "ListItem","position":1,"item":{"@id":"https://chumaltd.github.io/en/","name": "civilis" }},
{"@type": "ListItem","position":4,"item":{"@id": "https://chumaltd.github.io/en/voip-integration/","name": "VoIP integration under the scorching sun" }
}]}
]}
</script>
</nav>

    </div>
  </div>
</nav>
<div class="coverart" style="
        background-image: url(/images/m84jrlxVUc1r9blbt.jpg);
      
      ">
<main class="container-xl">
    <div class="d-sm-flex" style="padding: calc(min(10vw, 1340px)) 0">
    <div class="quarter hide-sm"></div>
    <div id="pagetitle" class="three-quarter px-3">
	<div class="mb-4">
        <h1 class="h2 idx py-5">
          VoIP integration under the scorching sun
        </h1><div style="text-align: right; font-weight: 600; font-style: italic">Aug 15, 2024</div></div>
    </div>
  </div>
  <div class="d-sm-flex">
    <nav class="quarter layered">
        <nav class="mb-3 px-5 py-4">
            <a href="/ja/voip-integration/" class="mx-4">Japanese</a></nav><aside class="toc sticky" style="position: sticky; top: 3em">
        <div class="header"><i class="material-symbols-outlined">toc</i>&nbsp;VoIP integration under the scorching sun</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#sip-and-asterisk">SIP and Asterisk</a></li>
    <li><a href="#sip-trunking-services-are-declining-in-popularity">SIP trunking services are declining in popularity</a></li>
    <li><a href="#we-need-to-further-promote-commoditization">We need to further promote commoditization</a></li>
  </ul>
</nav>
      </aside>
    </nav>
    <div id="content" class="three-quarter">
      <article>
        <p>The 
<a href="https://en.wikipedia.org/wiki/Telephone">telephone</a>, invented by Bell in 1876, has been in use for 150 years. How much longer will the method of dialing a number to reach someone continue?</p>
<p>In Japan, due to the widespread adoption of mobile phones, traditional PSTN phones have been declining in households. However, businesses are still required to install phones, effectively making it mandatory due to administrative demands from governments.</p>
<p>While mobile phones operate on a network where each individual has their own number, businesses need someone from their team to respond to calls, which makes 
<a href="https://en.wikipedia.org/wiki/Voice_over_IP">VoIP</a> more suitable when the requirements are carefully considered. VoIP itself has been around for about 30 years, yet it hasn&rsquo;t fully become a commodity.</p>
<p>Amidst the hellish summer heat in Tokyo, last week, I decided to switch to VoIP.<br>
As is typical with network middleware, nothing seems to function until the very last stage before completion, and then it suddenly starts working smoothly. This lack of clear guidance during setup is likely one of the barriers to the widespread adoption of VoIP.</p>
<h2 id="sip-and-asterisk">SIP and Asterisk</h2>
<p>Currently, when considering the future of telephone operations, the most sustainable technology seems to be 
<a href="https://en.wikipedia.org/wiki/Session_Initiation_Protocol">SIP</a> family. It&rsquo;s even used in mobile VoLTE, making it the primary target when the PSTN is eventually replaced by IP networks.<br>
Since SIP message analysis is an inevitable part of the setup process, it’s crucial to have a good understanding of the SIP protocol beforehand.</p>
<p>While purely speculative, I believe that when SIP will get obsolete, it would be due to the realization and widespread adoption of quantum networks.<br>
If data could be directly linked between two geographically distant points, the need for packet-switched networks could disappear. Without such a profound shift, there doesn’t seem to be much benefit in fundamentally rewriting SIP. Its interim status as the best solution helps ensure that it won&rsquo;t easily become outdated.</p>
<p>
<a href="https://www.asterisk.org/">Asterisk</a> is an open-source PBX implementation that uses SIP. Given its long history of updates, it&rsquo;s well-crafted.<br>
While VoIP setup is inherently difficult, making Asterisk installation very challenging, it&rsquo;s arguably the most sustainable VoIP implementation globally, so it seems reasonable to base decisions on it.</p>
<p>I&rsquo;ve compiled 
<a href="https://www.unicorn.limited/en/rd/cloud/20231206-asterisk">a separate article</a> on technical configurations of Asterisk. However, Asterisk isn&rsquo;t alone in facing the issue of dwindling user communities, making useful information hard to come by. As usual, when you need to change your network configuration after running it for a while, the lack of technical information can turn it into a lost technology.<br>
While I&rsquo;d be glad if this article helps spark a wealth of information, it&rsquo;s more likely that I&rsquo;ll end up referring to my own article. I feel like I&rsquo;m always leaving a dying message for my future self.</p>
<h2 id="sip-trunking-services-are-declining-in-popularity">SIP trunking services are declining in popularity</h2>
<p>Businesses typically expect their phone systems to have a telephone number that can be dialed from external PSTN-compatible devices.</p>
<p>In Japan, telephone numbers are usually sold bundled with communication lines. However, for corporate use, the focus should be on a service model called SIP trunking, which connects to the internal VoIP network.</p>
<p>Recently, many SIP trunking services that provide phone numbers have been discontinued. It&rsquo;s unusual that no explanations have been offered by any service providers.<br>
Notably, new subscriptions have been halted as of 2023. The few providers that continue offering services have reinforced identity verification processes before resuming them.</p>
<p>Prior to the decline of SIP trunking, Japan saw a rise in specific fraud schemes, often involving Japanese nationals operating from places like the Philippines and Thailand, starting around 2017. Some of these cases escalated into violent crimes, including robbery and murder.<br>
Given that phones were a primary means of communication for these crimes, it seems likely that government regulations on the sale of communication methods, including mobile phones and IP phones, were enforced. Providers that couldn’t afford to implement the required identity verification processes may have opted to end their services entirely.</p>
<h2 id="we-need-to-further-promote-commoditization">We need to further promote commoditization</h2>
<p>It is difficult to predict future trends.</p>
<p>The fact that &ldquo;VoIP &amp; SIP trunking configuration is suitable for enterprise telephone requirements&rdquo; is not self-evident, leading both service providers and users to underestimate its importance. This is likely the main reason for its slow adoption.</p>
<p>A realistic approach would be to focus on further commoditizing Asterisk.</p>
<p>Since Asterisk itself is open source, commoditization here refers to reducing the technical barriers to its implementation. While there are distributions available that assist with setup, the lack of a breakthrough suggests that more work is needed.</p>
<p>There seems to be insufficient effort in addressing the tremendous complexity of combining various devices with SIP trunking services.</p>
<p>For example, once a SIP trunking service is chosen, the appropriate Asterisk configuration should be straightforward. If SIP trunking providers offered sample configurations for Asterisk, some of these challenges could be alleviated.<br>
Currently, it&rsquo;s common for providers not even to supply SIP message specifications, forcing users to go through extensive trial and error.</p>
<p>PSTN networks will likely be replaced by IP networks in the near future. While the infrastructure is becoming more suitable for VoIP, human skills have yet to catch up.</p>


	<div class="my-4" style="text-align: right; font-style: italic">
	<span>⁋ Aug 15, 2024</span><span class="mx-2">↻ Aug 16, 2024</span></div><div class="related_articles">
              <h4 id="related" class="idx"></h4>
              
              
<a href="/en/ipv6-transition/" class="compbox bordered py-2">
        <picture>
            <img src="/images/m84jrlxVUc1r9blbt.jpg">
        </picture>
        <div>
            <div class="h3 idx mb-2" href="/en/ipv6-transition/">IPv6移行</div>
            <div class="f5">インターネット機器はいずれすべてIPv6経由で通信することになる。IPv6に統一できた後、IP層には技術的なトラブルや関心はあまり存在しないだろう。
課題は、IPv4とIPv6が併存するデュアルスタックを長期間サポートせざるを得ない点にある。
IPv4枯渇の公式宣言は2011年からスタートしている。モバイルインターネットは成長を続けており、新たに接続するデバイスはIPv6の比率が高まっていく。
IPv6を導入することの技術障壁は実はあまりない一方で、当面はIPv4をデフォルト設定としている機器が多く、意識して設定しないとIPv6に切り替わらない。
導入よりも移行の方がトラブルが多いため、可能なら最初からIPv6を選択したい。
アクセス網のIPv6切り替え インターネットに接続する拠点のネットワークは、アクセス網のサービス商品選択で決まる。
日本の場合、家やオフィスと回線接続するNTTが、2011年頃から光ファイバーアクセス商品のネットワーク層をIPv6に切り替えており、該当サービスに加入した拠点がIPv6アクセスになる。
日本のブロードバンド回線は、2002年頃に ADSLが急速に普及し、2005年頃から光ファイバーに切り替わってきた。初期から加入してきた回線では、おおむね3世代目の回線変更でIPv4からIPv6へ切り替わったのではないか。
アクセス網の典型的なトラブルは、IPv4 over IPv6トンネルの実装から来る。
IPv4とIPv6は併存していたとしても完全に独立したネットワークであるため、アクセス網がIPv6ネイティブになるとIPv4のサービスには接続できない。
IPv4 over IPv6サービスを追加することでIPv4ネットワークにアクセス可能になるが、いくつかの方式が並立しておりプロバイダ事業者ごとに採用方式が異なる。結局のところIPv4 over IPv6トンネルのうち契約している方式をサポートするルーターが必須と言える。
Wi-Fiアクセスポイントがインターネットルーター機能を備えているケースが多く、どうやら近年は消費者向けのWi-Fiルーターが幅広くIPv4 over IPv6トンネルをサポートしている。
固定回線よりもWi-Fi規格の方が更新ペースが速いため、無線インフラの技術をキャッチアップして機器をリプレースしていると、IPv6切り替えの問題には遭遇しにくいだろう。
一方、企業オフィスのネットワーク構築にはやや難がある。
ルーターがIPv4 over IPv6の一部方式をサポートしていない場合が多々あり、契約している方式と合わなければネット利用に支障が出る。プロバイダを契約する際、サービス説明にはIPv6切り替えの技術的トラブルには言及がないのだが、ルーターの機能で吸収できなければ他に実装手段がない。
IPv4 over IPv6機能は、各種ネットワーク機能の中ではかなり瑣末な機能であるため、本来は重要な選定要件には加えたくないところだ。
IPv4接続プロバイダの時代にはルーターは1台しか接続できなかったのだが、IPv6ではスイッチングハブ経由で複数のルーターを接続できることも多い。そこで今回の移行では、IPv4アクセスしないネットワークを企業向けのルータで併設する構成をとった。
アドレス設定は複数方式が併存する IPv4時代にはIPアドレスの割当てはDHCPを用いてきた。おそらくIPv6では DHCPv6とSLAACが併存する。
IPv6の規格はSLAACで、潤沢なアドレス空間を生かして各端末がアドレスを自ら決める。DHCPv6はルーターなどの管理機器が決めて配布する。
DHCPv6を採用したいプラットフォームは、WindowsやVoIP機器などだ。要するにLAN管理者が集中管理したい用途ではアドレスも集中的に生成して追跡したい事情がある。一方、端末が移動するモバイル機器は、単一のルーターで集中管理し切れないシーンがあるためSLAACが適している。
よって、IPv6ネットワークの管理方式は規格間の競争ではなく両方生き残るだろう。ネットワーク機器は両方式を同時にサポートできる必要がある。
ルーターを自作するのも一手 一般的な方法とは言えないものの、アクセス網に必要な機能をカバーしようと思ったら、ルーターを自作すべきかもしれないと考えている。
後述のとおり、kubernetesのIP網を整備するとルーターを作っているのとほとんど同じ工程をたどる。
また、法人ルーター機器の機能不足が目立っていることや、ARMの進歩によってハードだけはコモディティ化が進んでいることも既製品の相対的な陳腐化の要因と言える。
従来はネットワーク機器を買うことがセキュリティ確保に役立ってきたが、今は既製品のセキュリティ品質が相当疑わしいという問題も大きい。 日本のポピュラーな消費者ブランド機器はほぼソフトウェア脆弱性を抱え、またどの製品もバックドア機能を持つチップが搭載されている可能性は残る。
ネットワークの安全を確認するには、ハードがクリアであることと、ルーティングの定義セットの全容を理解した方が良い。
データセンターのIPv6切り替え 企業は、拠点だけでなくデータセンターを借りていることも多い。
上述のとおり、アクセス網をIPv6に切り替えるとIPv4サービスへのアクセスに難が出る場合がある。
IPv6切り替え時にトラブルが起きるとIPv6に技術面の問題があると受けとる人が多そうだが、じっさいにはIPv6ピア間の通信には問題はなく、IPv4サービスとの互換機能にネックがある。
データセンターでシステムを運用している企業の場合、アクセス網がIPv6なのであれば、データセンターのサービスもIPv6に切り替えるべきだ。
IPv4互換性確保には何らかのプロキシ・ソフトウェアを利用するのが手軽だろう。……</div>
	</div>
</a>
<a href="/en/voip-integration/" class="compbox bordered py-2">
        <picture>
            <img src="/images/m84jrlxVUc1r9blbt.jpg">
        </picture>
        <div>
            <div class="h3 idx mb-2" href="/en/voip-integration/">VoIP integration under the scorching sun</div>
            <div class="f5">The telephone, invented by Bell in 1876, has been in use for 150 years. How much longer will the method of dialing a number to reach someone continue?
In Japan, due to the widespread adoption of mobile phones, traditional PSTN phones have been declining in households. However, businesses are still required to install phones, effectively making it mandatory due to administrative demands from governments.……</div>
	</div>
</a>
<a href="/en/covid19-2023/" class="compbox bordered py-2">
        <picture>
            <img src="/images/m84jrlxVUc1r9blbt.jpg">
        </picture>
        <div>
            <div class="h3 idx mb-2" href="/en/covid19-2023/">Halfway with COVID-19</div>
            <div class="f5">In Japan, starting from May 8th, 2023, the classification of COVID-19 as a Category 5 infectious disease means that the administrative response will shift to &ldquo;no guard&rdquo; status. However, this does not necessarily mean that the underlying situation has improved.
The Evolution of the Virus Ultimately, the coronavirus has fully entrenched itself worldwide, remaining an infectious disease that results in death in a certain percentage of cases.……</div>
	</div>
</a>
<a href="/en/civilis/" class="compbox bordered py-2">
        <picture>
            <img src="/images/m84jrlxVUc1r9blbt.jpg">
        </picture>
        <div>
            <div class="h3 idx mb-2" href="/en/civilis/">CIVILIS</div>
            <div class="f5">We have silly situations at last.
Everyone intends to make efforts every day from their respective social positions. Thus, the resulting social system was also one that efficiently spreads epidemics throughout the world.
COVID-19 is the returning of SARS in 2002 in terms of the virus type, the route of transmission, and the prevention of epidemics.……</div>
	</div>
</a>

          </div>

      </article>
    </div>
  </div>
</main>
</div>
</div>
<footer class="footer lazy-block"><div class="container-xl">
      <div>
          <img id="footer_logo" src="/common/civilis.svg" loading="lazy">
          
      </div>
  </div>
</footer><script type="module" src=/lib/cm.js ></script>
</body>
</html>
